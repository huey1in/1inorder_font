{"code":"import { defineComponent } from \"vue\";\nimport { BASE_URL } from \"@/common/config\";\nexport default defineComponent({\n    data() {\n        return {\n            form: new UTSJSONObject({\n                oldPassword: '',\n                newPassword: '',\n                confirmPassword: ''\n            })\n        };\n    },\n    methods: {\n        handleSubmit() {\n            if (!this.form.oldPassword) {\n                uni.showToast({ title: '请输入当前密码', icon: 'none' });\n                return null;\n            }\n            if (!this.form.newPassword) {\n                uni.showToast({ title: '请输入新密码', icon: 'none' });\n                return null;\n            }\n            if (this.form.newPassword.length < 6 || this.form.newPassword.length > 20) {\n                uni.showToast({ title: '密码长度为6-20位', icon: 'none' });\n                return null;\n            }\n            if (this.form.newPassword !== this.form.confirmPassword) {\n                uni.showToast({ title: '两次密码输入不一致', icon: 'none' });\n                return null;\n            }\n            const token = uni.getStorageSync('token');\n            uni.showLoading({ title: '提交中...' });\n            uni.request({\n                url: `${BASE_URL}/auth/change-password`,\n                method: 'POST',\n                header: new UTSJSONObject({\n                    'Authorization': `Bearer ${token}`,\n                    'Content-Type': 'application/json'\n                }),\n                data: new UTSJSONObject({\n                    currentPassword: this.form.oldPassword,\n                    newPassword: this.form.newPassword\n                }),\n                success: (res = null) => {\n                    if (res.data.success) {\n                        uni.showToast({ title: '密码修改成功', icon: 'success' });\n                        setTimeout(() => {\n                            uni.navigateBack();\n                        }, 1500);\n                    }\n                    else {\n                        uni.showToast({ title: res.data.message || '修改失败', icon: 'none' });\n                    }\n                },\n                fail: () => {\n                    uni.showToast({ title: '网络错误', icon: 'none' });\n                },\n                complete: () => {\n                    uni.hideLoading();\n                }\n            });\n        }\n    }\n});\n//# sourceMappingURL=D:/order/fontend/pages/settings/password.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.showToast","uni.getStorageSync","uni.showLoading","uni.request","uni.navigateBack","uni.hideLoading"],"map":"{\"version\":3,\"file\":\"password.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"password.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";AACC,OAAO,EAAE,QAAQ,EAAE,wBAA2B;AAE9C,+BAAe;IACd,IAAI;QACH,OAAO;YACN,IAAI,oBAAE;gBACL,WAAW,EAAE,EAAE;gBACf,WAAW,EAAE,EAAE;gBACf,eAAe,EAAE,EAAE;aACnB,CAAA;SACD,CAAA;IACF,CAAC;IACD,OAAO,EAAE;QACR,YAAY;YACX,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC3B,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;gBACjD,YAAM;aACN;YACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC3B,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;gBAChD,YAAM;aACN;YACD,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,EAAE,EAAE;gBAC1E,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;gBACpD,YAAM;aACN;YACD,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;gBACxD,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;gBACnD,YAAM;aACN;YAED,MAAM,KAAK,GAAG,GAAG,CAAC,cAAc,CAAC,OAAO,CAAC,CAAA;YACzC,GAAG,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAA;YAEpC,GAAG,CAAC,OAAO,CAAC;gBACX,GAAG,EAAE,GAAG,QAAQ,uBAAuB;gBACvC,MAAM,EAAE,MAAM;gBACd,MAAM,oBAAE;oBACP,eAAe,EAAE,UAAU,KAAK,EAAE;oBAClC,cAAc,EAAE,kBAAkB;iBAClC,CAAA;gBACD,IAAI,oBAAE;oBACL,eAAe,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW;oBACtC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW;iBAClC,CAAA;gBACD,OAAO,EAAE,CAAC,UAAQ;oBACjB,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE;wBACrB,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,CAAA;wBACnD,UAAU,CAAC;4BACV,GAAG,CAAC,YAAY,EAAE,CAAA;wBACnB,CAAC,EAAE,IAAI,CAAC,CAAA;qBACR;yBAAM;wBACN,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;qBAClE;gBACF,CAAC;gBACD,IAAI,EAAE;oBACL,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;gBAC/C,CAAC;gBACD,QAAQ,EAAE;oBACT,GAAG,CAAC,WAAW,EAAE,CAAA;gBAClB,CAAC;aACD,CAAC,CAAA;QACH,CAAC;KACD;CACD,EAAA\"}"}
