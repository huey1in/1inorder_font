{"version":3,"file":"list.js","sources":["pages/address/list.uvue","C:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkcmVzcy9saXN0LnV2dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"address-list\" v-if=\"addresses.length > 0\">\r\n\t\t\t<view class=\"address-item\" v-for=\"(item, index) in addresses\" :key=\"item.id\" @click=\"selectAddress(item)\">\r\n\t\t\t\t<view class=\"address-info\">\r\n\t\t\t\t\t<view class=\"user-row\">\r\n\t\t\t\t\t\t<text class=\"name\">{{item.contact_name}}</text>\r\n\t\t\t\t\t\t<text class=\"phone\">{{item.contact_phone}}</text>\r\n\t\t\t\t\t\t<view class=\"tag\" v-if=\"item.is_default\">\r\n\t\t\t\t\t\t\t<text class=\"tag-text\">默认</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"address-detail\">{{item.detail || item.address}}</text>\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"edit-btn\" @click.stop=\"editAddress(item)\">\r\n\t\t\t\t\t<image class=\"edit-icon\" src=\"/static/icons/icon-edit.svg\" mode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"empty-state\" v-else>\r\n\t\t\t<image class=\"empty-icon\" src=\"/static/icons/icon-empty.svg\" mode=\"aspectFit\"></image>\r\n\t\t\t<text class=\"empty-text\">还没有收货地址哦 ♡</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"footer-btn\">\r\n\t\t\t<button class=\"add-btn\" @click=\"addAddress\">\r\n\t\t\t\t<text class=\"btn-text\">+ 新增收货地址</text>\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport { BASE_URL } from '@/common/config.uts'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taddresses: [] as Array<any>,\r\n\t\t\t\tisSelectMode: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options: any) {\r\n\t\t\tif (options.select === 'true') {\r\n\t\t\t\tthis.isSelectMode = true\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.fetchAddresses()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tfetchAddresses() {\r\n\t\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\t\tif (!token) return\r\n\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${BASE_URL}/addresses`,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'Authorization': `Bearer ${token}`\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res: any) => {\r\n\t\t\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\t\t\tconst list = res.data.data.addresses || []\r\n\t\t\t\t\t\t\t// 适配后端字段\r\n\t\t\t\t\t\t\tthis.addresses = list.map((item: any) => ({\n\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\tcontact_name: item.name || item.contact_name,\n\t\t\t\t\t\t\t\tcontact_phone: item.phone || item.contact_phone,\n\t\t\t\t\t\t\t\taddress: item.address || '',\n\t\t\t\t\t\t\t\tdetail: item.detail || ''\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\taddAddress() {\r\n\t\t\t\tuni.navigateTo({ url: '/pages/address/edit' })\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\teditAddress(item: any) {\r\n\t\t\t\tuni.navigateTo({ url: `/pages/address/edit?id=${item.id}` })\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tselectAddress(item: any) {\r\n\t\t\t\tif (this.isSelectMode) {\r\n\t\t\t\t\t// 如果是选择模式，返回上一页并传递选中的地址\r\n\t\t\t\t\tconst pages = getCurrentPages()\r\n\t\t\t\t\tconst prevPage = pages[pages.length - 2]\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (prevPage.$vm.setAddress) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tprevPage.$vm.setAddress(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #FFF5F8;\r\n\t\tpadding-bottom: 120rpx;\r\n\t}\r\n\r\n\t.address-list {\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.address-item {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tborder-radius: 30rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 4rpx 16rpx rgba(255, 105, 180, 0.1);\r\n\t\tborder: 1px solid #FFF0F5;\r\n\t}\r\n\r\n\t.address-info {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.user-row {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.name {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 800;\r\n\t\tcolor: #5D4E6D;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.phone {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #888;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.tag {\r\n\t\tbackground-color: #FF69B4;\r\n\t\tpadding: 4rpx 12rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t}\r\n\r\n\t.tag-text {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t}\r\n\r\n\t.address-detail {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\r\n\t.edit-btn {\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.edit-icon {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t}\r\n\r\n\t.empty-state {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding-top: 200rpx;\r\n\t}\r\n\r\n\t.empty-icon {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\topacity: 0.5;\r\n\t}\r\n\r\n\t.empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #B8A9C9;\r\n\t}\r\n\r\n\t.footer-btn {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tpadding-bottom: calc(20rpx + env(safe-area-inset-bottom));\r\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\r\n\t\tbackdrop-filter: blur(10px);\r\n\t}\r\n\r\n\t.add-btn {\r\n\t\tbackground: linear-gradient(135deg, #FFB6C1 0%, #FF69B4 100%);\r\n\t\tborder-radius: 40rpx;\r\n\t\theight: 88rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tborder: none;\r\n\t\tbox-shadow: 0 8rpx 20rpx rgba(255, 105, 180, 0.3);\r\n\t}\r\n\t\r\n\t.add-btn:active {\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\r\n\t.btn-text {\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: bold;\r\n\t\tletter-spacing: 1px;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/order/fontend/pages/address/list.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","BASE_URL"],"mappings":";;;;AAoCC,MAAA,YAAeA,8BAAA;AAAA,EACd,OAAI;AACH,WAAO;AAAA,MACN,WAAW,CAAgB;AAAA,MAC3B,cAAc;AAAA;EAEf;AAAA,EACD,OAAO,UAAY,MAAA;AAClB,QAAI,QAAQ,WAAW,QAAQ;AAC9B,WAAK,eAAe;AAAA,IACrB;AAAA,EACA;AAAA,EACD,SAAM;AACL,SAAK,eAAc;AAAA,EACnB;AAAA,EACD,SAAS;AAAA,IACR,iBAAc;AACb,YAAM,QAAQC,cAAAA,MAAI,eAAe,OAAO;AACxC,UAAI,CAAC;AAAO,eAAK;AAEjBA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK,GAAGC,cAAQ,QAAA;AAAA,QAChB,QAAQ;AAAA,QACR,QAAQ,IAAA,cAAA;AAAA,UACP,iBAAiB,UAAU,KAAK;AAAA,SAChC;AAAA,QACD,SAAS,CAAC,MAAQ,SAAA;AACjB,cAAI,IAAI,KAAK,SAAS;AACrB,kBAAM,OAAO,IAAI,KAAK,KAAK,aAAa,CAAA;AAExC,iBAAK,YAAY,KAAK,IAAI,CAAC,OAAS,SAAA;AAAK,qBAAA,IAAA,cAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACrC,IAAI,GACP,EAAA,cAAc,KAAK,QAAQ,KAAK,cAChC,eAAe,KAAK,SAAS,KAAK,eAClC,SAAS,KAAK,WAAW,IACzB,QAAQ,KAAK,UAAU,IACtB,CAAA;AAAA,YAAA,CAAA;AAAA,UACH;AAAA,QACD;AAAA,MACA,CAAA;AAAA,IACD;AAAA,IAED,aAAU;AACTD,oBAAAA,MAAI,WAAW,EAAE,KAAK,sBAAuB,CAAA;AAAA,IAC7C;AAAA,IAED,YAAY,OAAS,MAAA;AACpBA,0BAAI,WAAW,EAAE,KAAK,0BAA0B,KAAK,EAAE,GAAC,CAAG;AAAA,IAC3D;AAAA,IAED,cAAc,OAAS,MAAA;AACtB,UAAI,KAAK,cAAc;AAEtB,cAAM,QAAQ;AACd,cAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AAEvC,YAAI,SAAS,IAAI,YAAY;AAE5B,mBAAS,IAAI,WAAW,IAAI;AAAA,QAC7B;AACAA,sBAAG,MAAC,aAAY;AAAA,MACjB;AAAA,IACD;AAAA,EACD;CACD;;;;;;;;;;;;;;;;;;;;;;;;;;ACnGD,GAAG,WAAW,eAAe;"}