{"version":3,"file":"password.js","sources":["pages/settings/password.uvue","C:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2V0dGluZ3MvcGFzc3dvcmQudXZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">当前密码</text>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\tv-model=\"form.oldPassword\" \r\n\t\t\t\t\tplaceholder=\"请输入当前密码\"\r\n\t\t\t\t\tplaceholder-class=\"placeholder\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">新密码</text>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\tv-model=\"form.newPassword\" \r\n\t\t\t\t\tplaceholder=\"请输入新密码（6-20位）\"\r\n\t\t\t\t\tplaceholder-class=\"placeholder\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">确认密码</text>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\tv-model=\"form.confirmPassword\" \r\n\t\t\t\t\tplaceholder=\"请再次输入新密码\"\r\n\t\t\t\t\tplaceholder-class=\"placeholder\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"submit-btn\" @click=\"handleSubmit\">\r\n\t\t\t<text class=\"submit-text\">确认修改</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport { BASE_URL } from '@/common/config.uts'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\toldPassword: '',\r\n\t\t\t\t\tnewPassword: '',\r\n\t\t\t\t\tconfirmPassword: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleSubmit() {\r\n\t\t\t\tif (!this.form.oldPassword) {\r\n\t\t\t\t\tuni.showToast({ title: '请输入当前密码', icon: 'none' })\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.form.newPassword) {\r\n\t\t\t\t\tuni.showToast({ title: '请输入新密码', icon: 'none' })\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.form.newPassword.length < 6 || this.form.newPassword.length > 20) {\r\n\t\t\t\t\tuni.showToast({ title: '密码长度为6-20位', icon: 'none' })\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.form.newPassword !== this.form.confirmPassword) {\r\n\t\t\t\t\tuni.showToast({ title: '两次密码输入不一致', icon: 'none' })\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\t\tuni.showLoading({ title: '提交中...' })\r\n\t\t\t\t\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${BASE_URL}/auth/change-password`,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'Authorization': `Bearer ${token}`,\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcurrentPassword: this.form.oldPassword,\r\n\t\t\t\t\t\tnewPassword: this.form.newPassword\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res: any) => {\r\n\t\t\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\t\t\tuni.showToast({ title: '密码修改成功', icon: 'success' })\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({ title: res.data.message || '修改失败', icon: 'none' })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showToast({ title: '网络错误', icon: 'none' })\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #FFF5F8;\r\n\t\tbackground-image: radial-gradient(circle at 10% 20%, rgba(255, 182, 193, 0.4) 0%, transparent 20%),\r\n\t\t\t\t\t\t  radial-gradient(circle at 90% 80%, rgba(255, 218, 224, 0.4) 0%, transparent 20%);\r\n\t\tpadding: 30rpx 24rpx;\r\n\t}\r\n\r\n\t.form-section {\r\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\r\n\t\tborder-radius: 40rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(255, 105, 180, 0.1);\r\n\t\tbackdrop-filter: blur(10px);\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tpadding: 36rpx 40rpx;\r\n\t\tborder-bottom: 1px solid rgba(255, 228, 236, 0.6);\r\n\t}\r\n\r\n\t.form-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.label {\r\n\t\twidth: 160rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #5D4E6D;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.input {\r\n\t\tflex: 1;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #5D4E6D;\r\n\t}\r\n\r\n\t.placeholder {\r\n\t\tcolor: #B8A9C9;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\tmargin-top: 60rpx;\r\n\t\tpadding: 32rpx;\r\n\t\tbackground: linear-gradient(135deg, #FFB6C1 0%, #FF69B4 100%);\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(255, 105, 180, 0.3);\r\n\t}\r\n\r\n\t.submit-btn:active {\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\r\n\t.submit-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-weight: 800;\r\n\t\tletter-spacing: 2px;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/order/fontend/pages/settings/password.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","BASE_URL"],"mappings":";;;AA4CC,MAAA,YAAeA,8BAAA;AAAA,EACd,OAAI;AACH,WAAO;AAAA,MACN,MAAM,IAAA,cAAA;AAAA,QACL,aAAa;AAAA,QACb,aAAa;AAAA,QACb,iBAAiB;AAAA,OAClB;AAAA;EAED;AAAA,EACD,SAAS;AAAA,IACR,eAAY;AACX,UAAI,CAAC,KAAK,KAAK,aAAa;AAC3BC,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAChD,eAAK;AAAA,MACN;AACA,UAAI,CAAC,KAAK,KAAK,aAAa;AAC3BA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAC/C,eAAK;AAAA,MACN;AACA,UAAI,KAAK,KAAK,YAAY,SAAS,KAAK,KAAK,KAAK,YAAY,SAAS,IAAI;AAC1EA,sBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,QAAQ;AACnD,eAAK;AAAA,MACN;AACA,UAAI,KAAK,KAAK,gBAAgB,KAAK,KAAK,iBAAiB;AACxDA,sBAAG,MAAC,UAAU,EAAE,OAAO,aAAa,MAAM,QAAQ;AAClD,eAAK;AAAA,MACN;AAEA,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxCA,oBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAEnCA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK,GAAGC,cAAQ,QAAA;AAAA,QAChB,QAAQ;AAAA,QACR,QAAQ,IAAA,cAAA;AAAA,UACP,iBAAiB,UAAU,KAAK;AAAA,UAChC,gBAAgB;AAAA,SAChB;AAAA,QACD,MAAM,IAAA,cAAA;AAAA,UACL,iBAAiB,KAAK,KAAK;AAAA,UAC3B,aAAa,KAAK,KAAK;AAAA,SACvB;AAAA,QACD,SAAS,CAAC,MAAQ,SAAA;AACjB,cAAI,IAAI,KAAK,SAAS;AACrBD,0BAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,WAAW;AAClD,uBAAW,MAAA;AACVA,4BAAG,MAAC,aAAY;AAAA,YAChB,GAAE,IAAI;AAAA,UACN,OAAK;AACNA,0BAAAA,MAAI,UAAU,EAAE,OAAO,IAAI,KAAK,WAAW,QAAQ,MAAM,OAAK,CAAG;AAAA,UAClE;AAAA,QACA;AAAA,QACD,MAAM,MAAA;AACLA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAAA,QAC7C;AAAA,QACD,UAAU,MAAA;AACTA,wBAAG,MAAC,YAAW;AAAA,QAChB;AAAA,MACA,CAAA;AAAA,IACF;AAAA,EACD;CACD;;;;;;;;;;;;;;ACzGD,GAAG,WAAW,eAAe;"}