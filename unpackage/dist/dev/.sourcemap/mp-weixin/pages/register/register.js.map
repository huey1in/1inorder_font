{"version":3,"file":"register.js","sources":["pages/register/register.uvue","C:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudXZ1ZQ"],"sourcesContent":["﻿<template>\n\t<view class=\"container\">\n\t\t<view class=\"form\">\n\t\t\t<view class=\"input-group\">\n\t\t\t\t<image class=\"input-icon\" src=\"/static/icons/icon-phone.svg\" mode=\"aspectFit\"></image>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tplaceholder=\"请输入手机号\"\n\t\t\t\t\tv-model=\"phone\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<view class=\"input-group\">\n\t\t\t\t<image class=\"input-icon\" src=\"/static/icons/icon-lock.svg\" mode=\"aspectFit\"></image>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"设置登录密码（6-20位）\"\n\t\t\t\t\tv-model=\"password\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<view class=\"input-group\">\n\t\t\t\t<image class=\"input-icon\" src=\"/static/icons/icon-lock.svg\" mode=\"aspectFit\"></image>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"再次输入密码\"\n\t\t\t\t\tv-model=\"confirmPassword\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<view class=\"login-btn\" @click=\"handleRegister\">\n\t\t\t\t<text class=\"login-btn-text\">注 册</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"register-link\" @click=\"goToLogin\">\n\t\t\t\t<text class=\"register-text\">已有账号？去登录</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<view class=\"footer\">\n\t\t\t<text class=\"footer-text\">注册即表示同意</text>\n\t\t\t<text class=\"link-text\" @click.stop=\"goAgreement\">《用户协议》</text>\n\t\t\t<text class=\"footer-text\">和</text>\n\t\t\t<text class=\"link-text\" @click.stop=\"goPrivacy\">《隐私政策》</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\timport { BASE_URL } from '@/common/config.uts'\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tphone: '',\n\t\t\t\tpassword: '',\n\t\t\t\tconfirmPassword: ''\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tasync handleRegister() {\n\t\t\t\tif (!this.phone) {\n\t\t\t\t\tuni.showToast({ title: '请输入手机号', icon: 'none' })\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (!this.password) {\n\t\t\t\t\tuni.showToast({ title: '请输入密码', icon: 'none' })\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (this.password.length < 6 || this.password.length > 20) {\n\t\t\t\t\tuni.showToast({ title: '密码长度为6-20位', icon: 'none' })\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (this.password !== this.confirmPassword) {\n\t\t\t\t\tuni.showToast({ title: '两次输入密码不一致', icon: 'none' })\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tlet loadingShown = false\n\t\t\t\ttry {\n\t\t\t\t\tuni.showLoading({ title: '注册中...' })\n\t\t\t\t\tloadingShown = true\n\n\t\t\t\t\tconst res: any = await new Promise((resolve, reject) => {\n\t\t\t\t\t\tuni.__f__('log','at pages/register/register.uvue:88','注册请求 payload:', {\n\t\t\t\t\t\t\tphone: this.phone,\n\t\t\t\t\t\t\tpassword: this.password\n\t\t\t\t\t\t})\n\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\turl: `${BASE_URL}/auth/register`,\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tphone: this.phone,\n\t\t\t\t\t\t\t\tpassword: this.password\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess: (resp) => {\n\t\t\t\t\t\t\t\tuni.__f__('log','at pages/register/register.uvue:103','注册响应:', resp)\n\t\t\t\t\t\t\t\tresolve(resp)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: reject\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\tif ((res.statusCode === 200 || res.statusCode === 201) && res.data && res.data.success) {\n\t\t\t\t\t\tif (res.data.data && res.data.data.token) {\n\t\t\t\t\t\t\tuni.setStorageSync('token', res.data.data.token)\n\t\t\t\t\t\t\tif (res.data.data.user) {\n\t\t\t\t\t\t\t\tuni.setStorageSync('userInfo', res.data.data.user)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuni.showToast({ title: '注册成功', icon: 'success' })\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.reLaunch({ url: '/pages/index/index' })\n\t\t\t\t\t\t}, 1200)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst msg = res.data?.message || `注册失败（${res.statusCode || '未知错误'}）`\n\t\t\t\t\t\tuni.showToast({ title: msg, icon: 'none' })\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.showToast({ title: '网络错误', icon: 'none' })\n\t\t\t\t} finally {\n\t\t\t\t\tif (loadingShown) {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgoToLogin() {\n\t\t\t\tconst pages = getCurrentPages()\n\t\t\t\tif (pages.length > 1) {\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t} else {\n\t\t\t\t\tuni.redirectTo({ url: '/pages/login/login' })\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgoAgreement() {\n\t\t\t\tuni.navigateTo({ url: '/pages/legal/agreement' })\n\t\t\t},\n\n\t\t\tgoPrivacy() {\n\t\t\t\tuni.navigateTo({ url: '/pages/legal/privacy' })\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100vh;\n\t\tbackground: linear-gradient(180deg, #FFE4EC 0%, #FFF5F8 100%);\n\t\tbackground-image: radial-gradient(circle at 10% 20%, rgba(255, 182, 193, 0.4) 0%, transparent 20%),\n\t\t\t\t\t  radial-gradient(circle at 90% 80%, rgba(255, 218, 224, 0.4) 0%, transparent 20%);\n\t\tpadding: 40rpx;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.form {\n\t\tflex: 1;\n\t\tpadding: 40rpx 20rpx;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.input-group {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tpadding: 30rpx 36rpx;\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\tborder: 2px solid #FFB6C1;\n\t\tborder-radius: 40rpx;\n\t\tmargin-bottom: 40rpx;\n\t\tbox-shadow: 0 8rpx 24rpx rgba(255, 105, 180, 0.1);\n\t\tbackdrop-filter: blur(10px);\n\t\ttransition: all 0.3s ease;\n\t}\n\n\t.input-group:focus-within {\n\t\tborder-color: #FF69B4;\n\t\tbackground-color: #FFFFFF;\n\t\tbox-shadow: 0 12rpx 30rpx rgba(255, 105, 180, 0.25);\n\t\ttransform: translateY(-2px);\n\t}\n\n\t.input-icon {\n\t\twidth: 48rpx;\n\t\theight: 48rpx;\n\t\tmargin-right: 24rpx;\n\t}\n\n\t.input {\n\t\tflex: 1;\n\t\tfont-size: 30rpx;\n\t\tcolor: #5D4E6D;\n\t\tfont-weight: 500;\n\t}\n\n\t.login-btn {\n\t\tmargin-top: 80rpx;\n\t\tpadding: 36rpx;\n\t\tbackground: linear-gradient(135deg, #FFB6C1 0%, #FF69B4 100%);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tborder-radius: 40rpx;\n\t\tbox-shadow: 0 10rpx 30rpx rgba(255, 105, 180, 0.4);\n\t\ttransition: transform 0.2s;\n\t}\n\t\n\t.login-btn:active {\n\t\ttransform: scale(0.98);\n\t\tbox-shadow: 0 6rpx 20rpx rgba(255, 105, 180, 0.3);\n\t}\n\n\t.login-btn-text {\n\t\tfont-size: 36rpx;\n\t\tcolor: #fff;\n\t\tfont-weight: 800;\n\t\tletter-spacing: 6px;\n\t}\n\n\t.register-link {\n\t\tmargin-top: 50rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t}\n\n\t.register-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #FF69B4;\n\t\tfont-weight: 600;\n\t\ttext-decoration: underline;\n\t\ttext-decoration-color: rgba(255, 105, 180, 0.3);\n\t}\n\n\t.footer {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\t\tflex-wrap: wrap;\n\t\tpadding: 40rpx 0;\n\t\topacity: 0.8;\n\t}\n\n\t.footer-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #B8A9C9;\n\t}\n\n\t.link-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #FF69B4;\n\t\tmargin: 0 8rpx;\n\t\tfont-weight: 600;\n\t}\n</style>\n","import MiniProgramPage from 'D:/order/fontend/pages/register/register.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","BASE_URL"],"mappings":"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"}